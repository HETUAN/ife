<!DOCTYPE>
<html>

<head>
    <meta charset="utf-8">
    <title>IFE JavaScript Task 21</title>
    <style type="text/css">
    div {
        float: left;
        min-height: 30px;
        min-width: 60px;
        border: 1px solid black;
        margin: 10px;
    }
    </style>
    <script type="text/javascript">
    var show = function() {
        // 
        var tree = document.getElementById("tree").firstElementChild;
        var oldnodes = [];
        var newnodes = [];
        var len = tree.children.length;
        for (var i = 0; i < len; i++)
            newnodes.push(tree.children[i]);
        while (newnodes.length > 0) {
            oldnodes = newnodes;
            //newnodes.length = 0;
            newnodes = [];
            var ll = oldnodes.length;
            for (var idx = 0; idx<ll;idx++) {
                var node = oldnodes[idx];
                //console.log(node);
                if (node == null)
                    continue;
                var l = node.children.length;
                for (var idxx = 0;idxx<l;idxx++)
                {
                    //newnodes[newnodes.length] = node.children[idxx]; 
                    newnodes.push(node.children[idxx]); 
                }
                node.style.borderColor = "red";
                setTimeout("resetColor("+node+")",1000)
                //sleep(1000);
            }
        }
    }

    function resetColor(node)
    {
        console.log(node.style.borderColor);
        node.style.borderColor = "black";
    }
    function sleep(numberMillis) {
        var now = new Date();
        var exitTime = now.getTime() + numberMillis;
        while (true) {
            now = new Date();
            if (now.getTime() > exitTime)
                return;
        }
    }
    window.onload = function() {
        sleep(1000);
        show();
    }
    </script>
</head>

<body>
    <div id="tree">
        <div>
            <div>
                <div>
                    <div></div>
                    <div></div>
                </div>
                <div>
                    <div></div>
                    <div></div>
                </div>
            </div>
            <div>
                <div>
                    <div></div>
                    <div></div>
                </div>
                <div>
                    <div></div>
                    <div></div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>
